{% extends "base.html" %}
{% block content %}

<div class="container well">
<div class="row">
    {% for bm in bms %}
    <div class="span12">
    <dl>
      <dt><i class="icon-bookmark"></i> <a href="{{ bm.url }}">{{ bm.title }}</a></dt>
      <dd>{{ bm.comment }} </dd>
      <dd>
      <div class="btn-toolbar">
        
        <div class="btn-group">
          <a class="btn btn-mini" href="/archive?id={{ bm.key.id() }}">
          {% if bm.archived %}
          <i class="icon-flag"></i> inbox</a>
          {% else %}
          <i class="icon-check"></i> archive</a>
          {% endif %}
        </div>

        <div class="btn-group">
          <button class="btn disabled btn-mini"><i class="icon-calendar"></i> {{ bm.data|dtf }}</button>
        </div>
        <div class="btn-group">
          <button class="btn btn-mini" data-toggle="button" id="toggle-{{ bm.key.id() }}"><i class="icon-edit"></i> edit</button>
        </div>
       {% if bm.archived %}
        <div class="btn-group">
          <a class="btn btn-mini" href="/delete?id={{ bm.key.id() }}"><i class="icon-remove"></i> delete</a>
        </div>
        {% endif %}
        
      {% for tag in bm.tags %}        
        <div class="btn-group">          
          <a class="btn  btn-mini" href="/search?tag={{ tag.get().name }}"><i class="icon-tag"></i> {{ tag.get().name }}</a>
          <a class="btn  btn-mini" href="/tag?bm={{ bm.key.id() }}&tag={{ tag.id() }}"><i class="icon-remove"></i></a>
        </div>
       {% endfor %}
      </div>
     </dd>
     <dd class="hide" id="rigo-{{ bm.key.id() }}">
        <form action="/tag?id={{ bm.key.id() }}" method="post">        
          <input type="text" placeholder="add one tag" class="input input-medium" name="tag" allowBlank="true">
        </form>
     </dd>
    </dl>
    </div>
<script>
  $("#toggle-{{ bm.key.id() }}").click(function () {
  $("#rigo-{{ bm.key.id() }}").toggle();
  });
</script>
    {% endfor %}
</div>
</div>
{% endblock %}